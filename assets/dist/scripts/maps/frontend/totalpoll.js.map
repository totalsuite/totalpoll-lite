{"version":3,"sources":["../assets/src/scripts/frontend/totalpoll.ts"],"names":[],"mappings":"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","file":"../../frontend/totalpoll.js","sourcesContent":["let jQuery = window['jQuery'];\r\nnamespace TotalPoll {\r\n    export var Polls = {};\r\n\r\n    /**\r\n     * Utils\r\n     */\r\n    class Modal {\r\n        public element;\r\n        public template = `\r\n<style type=\"text/css\">\r\n    @-webkit-keyframes modalFadeIn {\r\n        from {\r\n            opacity: 0;\r\n        }   \r\n        \r\n        to {\r\n            opacity: 1;\r\n        } \r\n    }\r\n        \r\n    @keyframes modalFadeIn {\r\n        from {\r\n            opacity: 0;\r\n        }   \r\n        \r\n        to {\r\n            opacity: 1;\r\n        } \r\n    }\r\n        \r\n    @-webkit-keyframes modalFadeOut {\r\n        from {\r\n            opacity: 1;\r\n        }   \r\n        \r\n        to {\r\n            opacity: 0;\r\n        } \r\n    }\r\n        \r\n    @keyframes modalFadeOut {\r\n        from {\r\n            opacity: 1;\r\n        }   \r\n        \r\n        to {\r\n            opacity: 0;\r\n        } \r\n    }\r\n    \r\n    .totalpoll-modal {\r\n        position:fixed;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        z-index: 999999999;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: rgba(0,0,0,0.9);\r\n        display: none;\r\n        -webkit-box-orient: vertical;\r\n        -webkit-box-direction: normal;\r\n        -webkit-flex-direction: column;\r\n            -ms-flex-direction: column;\r\n                flex-direction: column;\r\n        -webkit-box-align: center;\r\n        -webkit-align-items: center;\r\n            -ms-flex-align: center;\r\n                align-items: center;\r\n        -webkit-box-pack: center;\r\n        -webkit-justify-content: center;\r\n            -ms-flex-pack: center;\r\n                justify-content: center;\r\n    }\r\n    \r\n    .totalpoll-modal.totalpoll-is-visible {\r\n        display: -webkit-box;\r\n        display: -webkit-flex;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        -webkit-animation: modalFadeIn 0.2s ease-in forwards;\r\n                animation: modalFadeIn 0.2s ease-in forwards;\r\n    }    \r\n    \r\n    .totalpoll-modal.totalpoll-is-hiding {\r\n        display: -webkit-box;\r\n        display: -webkit-flex;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        -webkit-animation: modalFadeOut 0.2s ease-in forwards;\r\n                animation: modalFadeOut 0.2s ease-in forwards;\r\n    }\r\n    \r\n    .totalpoll-modal-content {\r\n        position: relative;\r\n        display: -webkit-box;\r\n        display: -webkit-flex;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        -webkit-box-flex: 1;\r\n        -webkit-flex: 1;\r\n            -ms-flex: 1;\r\n                flex: 1;\r\n        width: 100%;\r\n        height: 100%;\r\n        max-width: 100vh;\r\n        max-width: 100%;\r\n        max-height: 100vh;\r\n        max-height: 100%;\r\n        -webkit-box-sizing: border-box;\r\n                box-sizing: border-box;\r\n        -webkit-box-align: center;\r\n        -webkit-align-items: center;\r\n            -ms-flex-align: center;\r\n                align-items: center;\r\n        -webkit-box-pack: center;\r\n        -webkit-justify-content: center;\r\n            -ms-flex-pack: center;\r\n                justify-content: center;\r\n    }\r\n    \r\n    @media (min-width:768px){\r\n        .totalpoll-modal-content {\r\n            max-width: 85vh;\r\n            max-width: 85%;\r\n            max-height: 85vh;\r\n            max-height: 85%;\r\n            padding: 2em;\r\n        }\r\n    }\r\n    \r\n    .totalpoll-modal-content img {\r\n        max-width: 100%!important;\r\n        max-height: 100%!important;\r\n        width: auto!important;\r\n        height: auto!important;\r\n    }\r\n        \r\n    .totalpoll-modal-content .totalpoll-embed-type-image {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        display: -webkit-box;\r\n        display: -webkit-flex;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        -webkit-box-align: center;\r\n        -webkit-align-items: center;\r\n            -ms-flex-align: center;\r\n                align-items: center;\r\n        -webkit-box-pack: center;\r\n        -webkit-justify-content: center;\r\n            -ms-flex-pack: center;\r\n                justify-content: center;\r\n        margin: auto;\r\n        text-align: center;\r\n    }\r\n    \r\n    .totalpoll-modal-content .totalpoll-embed-type-video {\r\n        position: relative;\r\n        padding-bottom: 56.25%;\r\n        overflow: hidden;\r\n        max-width: 100%;\r\n        width: 100%;\r\n    }\r\n    \r\n    .totalpoll-modal-content .totalpoll-embed-type-video iframe, .totalpoll-modal-content .totalpoll-embed-type-video object, .totalpoll-modal-content .totalpoll-embed-type-video embed,.totalpoll-modal-content .totalpoll-embed-type-video video, .totalpoll-modal-content .totalpoll-embed-type-video audio {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    \r\n    .totalpoll-modal-close {\r\n        position: absolute;\r\n        top: 1em;\r\n        right: 1em;\r\n        width: 3em;\r\n        height: 3em;\r\n        padding: 1em;\r\n        border: 1px solid rgba(255, 255, 255, 0.1);\r\n        -webkit-border-radius: 50%;\r\n                border-radius: 50%;\r\n        fill: white;\r\n        cursor: pointer;\r\n        background: rgba(0, 0, 0, 0.5);\r\n        -webkit-box-sizing: border-box;\r\n                box-sizing: border-box;\r\n    }\r\n    \r\n    .totalpoll-modal-close svg {\r\n        vertical-align: top;\r\n        opacity: 0.5;\r\n        -webkit-transition: 0.2s all ease-out;\r\n        -o-transition: 0.2s all ease-out;\r\n        transition: 0.2s all ease-out;\r\n    }\r\n    \r\n    .totalpoll-modal-close:hover svg {\r\n        opacity: 1;\r\n        -webkit-transform: scale(1.1);\r\n            -ms-transform: scale(1.1);\r\n                transform: scale(1.1);\r\n    }\r\n    \r\n    .totalpoll-modal-close:active svg {\r\n        -webkit-transform: scale(0.8);\r\n            -ms-transform: scale(0.8);\r\n                transform: scale(0.8);\r\n    }\r\n    \r\n</style>\r\n<div class=\"totalpoll-modal\">\r\n    <div class=\"totalpoll-modal-content\"></div>\r\n    <div class=\"totalpoll-modal-close\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"5 5 14 14\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z\"/></svg>\r\n    </div>\r\n</div>`;\r\n\r\n        constructor() {\r\n            this.create();\r\n            this.appendToBody();\r\n\r\n            this.element.on('click', (event) => {\r\n                if (jQuery(event.srcElement).hasClass('totalpoll-modal') || jQuery(event.srcElement).hasClass('totalpoll-modal-content')) {\r\n                    this.hide();\r\n                }\r\n            });\r\n\r\n            this.element.find('.totalpoll-modal-close').on('click', () => {\r\n                this.hide();\r\n            });\r\n        }\r\n\r\n        appendToBody() {\r\n            jQuery(document.body).append(this.element);\r\n        }\r\n\r\n        create() {\r\n            this.element = jQuery(this.template);\r\n        }\r\n\r\n        hide() {\r\n            this.element.removeClass('totalpoll-is-visible');\r\n            this.element.addClass('totalpoll-is-hiding');\r\n            jQuery(document).unbind('keydown.totalpoll-modal');\r\n            setTimeout(() => {\r\n                this.element.removeClass('totalpoll-is-hiding');\r\n                document.documentElement.style.overflowY = 'initial';\r\n                this.element.find('.totalpoll-modal-content').html('');\r\n            }, 200);\r\n        }\r\n\r\n        remove() {\r\n            this.element.remove();\r\n        }\r\n\r\n        setContent(content) {\r\n            this.element.find('.totalpoll-modal-content').html(content);\r\n        }\r\n\r\n        show() {\r\n            document.documentElement.style.overflowY = 'hidden';\r\n            this.element.addClass('totalpoll-is-visible');\r\n            jQuery(document).one(\r\n                'keydown.totalpoll-modal',\r\n                (event) => {\r\n                    if (event.which === 27) {\r\n                        this.hide();\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Behaviours\r\n     */\r\n    interface Behaviour {\r\n        destroy();\r\n    }\r\n\r\n    class AjaxBehaviour implements Behaviour {\r\n        private loader = jQuery(`\r\n            <style>\r\n            .totalpoll-wrapper { \r\n                position: relative; \r\n            } \r\n            \r\n            .totalpoll-container {\r\n                filter: blur(3px);\r\n                transition: all 400ms ease-in;\r\n            }\r\n            \r\n            .totalpoll-form-loading { \r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                right: 0;\r\n                bottom: 0;\r\n                width: 100%;\r\n                height: 100%;\r\n                display: flex;\r\n                flex-direction: column;\r\n                justify-content: center;\r\n                align-items: center;\r\n                background-color: rgba(255,255,255, 0.3);\r\n            } \r\n            </style>\r\n            <div class=\"totalpoll-form-loading\">\r\n    <svg width=\"38\" height=\"38\" viewBox=\"0 0 38 38\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <defs>\r\n            <linearGradient x1=\"8.042%\" y1=\"0%\" x2=\"65.682%\" y2=\"23.865%\" id=\"totalpoll-loading-gradient\">\r\n                <stop stop-color=\"#000000\" stop-opacity=\"0\" offset=\"0%\"/>\r\n                <stop stop-color=\"#000000\" stop-opacity=\".631\" offset=\"63.146%\"/>\r\n                <stop stop-color=\"#000000\" offset=\"100%\"/>\r\n            </linearGradient>\r\n        </defs>\r\n        <g fill=\"none\" fill-rule=\"evenodd\">\r\n            <g transform=\"translate(1 1)\">\r\n                <path d=\"M36 18c0-9.94-8.06-18-18-18\" id=\"Oval-2\" stroke=\"url(#totalpoll-loading-gradient)\" stroke-width=\"2\">\r\n                    <animateTransform\r\n                            attributeName=\"transform\"\r\n                            type=\"rotate\"\r\n                            from=\"0 18 18\"\r\n                            to=\"360 18 18\"\r\n                            dur=\"0.9s\"\r\n                            repeatCount=\"indefinite\"/>\r\n                </path>\r\n                <circle fill=\"#fff\" cx=\"36\" cy=\"18\" r=\"1\">\r\n                    <animateTransform\r\n                            attributeName=\"transform\"\r\n                            type=\"rotate\"\r\n                            from=\"0 18 18\"\r\n                            to=\"360 18 18\"\r\n                            dur=\"0.9s\"\r\n                            repeatCount=\"indefinite\"/>\r\n                </circle>\r\n            </g>\r\n        </g>\r\n    </svg>\r\n</div>`);\r\n\r\n        constructor(private poll: Poll) {\r\n            poll.element.find('[type=\"submit\"]').on('click', function (event) {\r\n                poll.element.find('[name=\"totalpoll[action]\"]').val(this.value);\r\n            });\r\n            poll.element.find('form').on('submit', (event) => {\r\n                this.load(this.poll.config.ajaxEndpoint, new FormData(event.currentTarget), 'POST');\r\n                event.preventDefault();\r\n            });\r\n        }\r\n\r\n        destroy() {\r\n        }\r\n\r\n        load(url, data = {}, method = 'GET') {\r\n            this.poll.element.css('pointer-events', 'none');\r\n            this.poll.element.parent().css('min-height', this.poll.element.parent().outerHeight());\r\n\r\n            this.poll.element.prepend(this.loader);\r\n\r\n            this.poll.transition.out(() => {\r\n\r\n                jQuery.ajax({\r\n                    url: url,\r\n                    data: data,\r\n                    processData: method == 'POST' ? false : true,\r\n                    contentType: false,\r\n                    type: method,\r\n                })\r\n                    .done((response) => {\r\n                        let $poll = jQuery(response);\r\n                        $poll.find('.totalpoll-container').hide();\r\n\r\n                        this.poll.transition.out(() => {\r\n                            this.poll.element.replaceWith($poll);\r\n                            let poll = new TotalPoll.Poll($poll, true, this.poll.config['behaviours']['async']);\r\n                            poll.transition.in(() => {\r\n                                poll.element.parent().css('min-height', 0);\r\n                            });\r\n                        });\r\n                    })\r\n                    .fail((error) => {\r\n                        this.poll.element.removeAttr('style');\r\n                        alert(this.poll.config['i18n']['Something went wrong! Please try again.']);\r\n                    });\r\n            });\r\n        }\r\n    }\r\n\r\n    class SliderBehaviour implements Behaviour {\r\n        public $buttons;\r\n        public $currentSlide;\r\n        public $navigationButtons;\r\n        public $nextButton;\r\n        public $previousButton;\r\n        public $slides;\r\n        public $voteButton;\r\n        public currentSlide = 0;\r\n\r\n        //@PRO\r\n        constructor(private poll: Poll) {\r\n            if (poll.screen === 'vote' || poll.screen === 'results') {\r\n                poll.element.find('.totalpoll-form-custom-fields').attr('totalpoll-valid-selection', 'true');\r\n                this.setupButtons(poll.element.find('.totalpoll-buttons'), poll.element.find('.totalpoll-button'));\r\n                this.setupSlides(poll.element.find('.totalpoll-question, .totalpoll-form-custom-fields:has(input)'));\r\n            }\r\n        }\r\n\r\n        destroy() {\r\n        }\r\n\r\n        isFirstSlide() {\r\n            return this.currentSlide === 0;\r\n        }\r\n\r\n        isLastSlide() {\r\n            return this.$slides.length === this.currentSlide + 1;\r\n        }\r\n\r\n        isValidSelection() {\r\n            return this.$currentSlide.is('[totalpoll-valid-selection=\"true\"]');\r\n        }\r\n\r\n        nextSlide(event) {\r\n            if (this.isLastSlide()) {\r\n                return;\r\n            } else {\r\n                event.preventDefault();\r\n                this.setSlide(this.currentSlide + 1);\r\n            }\r\n\r\n        }\r\n\r\n        previousSlide(event) {\r\n            if (this.isFirstSlide()) {\r\n                return;\r\n            } else {\r\n                event.preventDefault();\r\n                this.setSlide(this.currentSlide - 1);\r\n            }\r\n        }\r\n\r\n        refreshButtons() {\r\n            this.$buttons.hide();\r\n            this.$nextButton[this.isLastSlide() ? 'hide' : 'show']();\r\n            this.$previousButton[this.isFirstSlide() ? 'hide' : 'show']();\r\n            this.$buttons[this.isLastSlide() ? 'show' : 'hide']();\r\n\r\n            if (this.poll.screen === 'vote') {\r\n                this.$voteButton.prop('disabled', !this.isValidSelection());\r\n                this.$nextButton.prop('disabled', !this.isValidSelection());\r\n            }\r\n        }\r\n\r\n        setSlide(index) {\r\n            this.$slides.eq(this.currentSlide).fadeOut(500, () => {\r\n                this.currentSlide = index;\r\n                this.$currentSlide = this.$slides.eq(this.currentSlide);\r\n                this.$currentSlide.fadeIn();\r\n                this.refreshButtons();\r\n            });\r\n        }\r\n\r\n        setupButtons(container, buttons) {\r\n            this.$buttons = buttons;\r\n            this.$voteButton = this.$buttons.filter('button[value=\"vote\"]');\r\n\r\n            this.$previousButton = jQuery(`<button type=\"button\" class=\"totalpoll-button totalpoll-buttons-slider-previous\">${this.poll.config['i18n']['Previous']}</button>`);\r\n            this.$nextButton = jQuery(`<button type=\"button\" class=\"totalpoll-button totalpoll-buttons-slider-next\">${this.poll.config['i18n']['Next']}</button>`);\r\n\r\n            container.prepend(this.$previousButton);\r\n            container.append(this.$nextButton);\r\n            container.append(this.$nextButton);\r\n\r\n            this.$voteButton.on('click', (event) => this.nextSlide(event));\r\n            this.$previousButton.on('click', (event) => this.previousSlide(event));\r\n            this.$nextButton.on('click', (event) => this.nextSlide(event));\r\n        }\r\n\r\n        setupSlides(slides) {\r\n            this.$slides = slides;\r\n            this.$slides.hide();\r\n\r\n            let $questions = this.$slides.filter('.totalpoll-question');\r\n            $questions.each((index, element) => {\r\n                let $question = jQuery(element);\r\n                $question.append(`<div class=\"totalpoll-question-number\">${index + 1} ${this.poll.config['i18n']['of']} ${$questions.length}</div>`);\r\n                $question.on('change', 'input[type=\"checkbox\"], input[type=\"radio\"]', (event) => {\r\n                    this.refreshButtons();\r\n                });\r\n            });\r\n\r\n            this.setSlide(0);\r\n\r\n            // Move to custom fields if there are errors\r\n            if (this.$slides.last().find('.totalpoll-form-field-errors-item').length) {\r\n                this.setSlide(this.$slides.length - 1);\r\n            }\r\n        }\r\n\r\n        //@END-PRO\r\n    }\r\n\r\n    class OneClickBehaviour implements Behaviour {\r\n        //@PRO\r\n        constructor(poll: Poll) {\r\n            var $voteButton = poll.element.find('.totalpoll-buttons-vote');\r\n            $voteButton.hide();\r\n            poll.element.find('.totalpoll-question input[type=\"checkbox\"], .totalpoll-question input[type=\"radio\"]').on('change', function (event) {\r\n                $voteButton.click();\r\n            });\r\n        }\r\n\r\n        destroy() {\r\n        }\r\n\r\n        //@END-PRO\r\n    }\r\n\r\n    class ScrollUpBehaviour implements Behaviour {\r\n        constructor(poll: Poll) {\r\n            if (poll.isViaAjax() && !poll.isViaAsync()) {\r\n                setTimeout(() => {\r\n                    jQuery('html, body').animate({scrollTop: poll.element.offset().top - 100}, 1000);\r\n                }, 200);\r\n            }\r\n        }\r\n\r\n        destroy() {\r\n        }\r\n    }\r\n\r\n    class EmbedResizingBehaviour implements Behaviour {\r\n        public listener;\r\n\r\n        constructor(public poll) {\r\n            this.listener = (event) => this.receiveRequest(event);\r\n            window.addEventListener(\"message\", this.listener, false);\r\n        }\r\n\r\n        destroy() {\r\n            window.removeEventListener(\"message\", this.listener);\r\n        }\r\n\r\n        postHeight() {\r\n            top.postMessage({totalpoll: {id: this.poll.id, action: 'resizeHeight', value: jQuery(document.body).height()}}, '*');\r\n        }\r\n\r\n        receiveRequest(event) {\r\n            if (event.data.totalpoll && event.data.totalpoll.id === this.poll.id && event.data.totalpoll.action === 'requestHeight') {\r\n                this.postHeight();\r\n            }\r\n        }\r\n    }\r\n\r\n    class SelectionBehaviour implements Behaviour {\r\n        constructor(private poll: Poll) {\r\n            poll.element.find('.totalpoll-question input[type=\"checkbox\"], .totalpoll-question input[type=\"radio\"]').on('change', function (event) {\r\n                var valid = false;\r\n                var $this = jQuery(this);\r\n                var $question = $this.closest('.totalpoll-question');\r\n                var $otherChoice = $question.find('.totalpoll-question-choices-other');\r\n                var $otherChoiceField = $otherChoice.find('input[type=\"text\"]');\r\n                var minSelection = parseInt($question.attr('totalpoll-min-selection')) || 0;\r\n                var maxSelection = parseInt($question.attr('totalpoll-max-selection')) || 1;\r\n\r\n                $question.find('.totalpoll-question-choices-item').removeClass('totalpoll-question-choices-item-checked');\r\n                $question.find('.totalpoll-question-choices-item:has(input:checked)').addClass('totalpoll-question-choices-item-checked');\r\n\r\n                var $checked = $question.find('input[type=\"checkbox\"]:checked, input[type=\"radio\"]:checked');\r\n                var $unchecked = $question.find('input[type=\"checkbox\"]:not(:checked), input[type=\"radio\"]:not(:checked)');\r\n                if (maxSelection == 1) {\r\n                    valid = Boolean($checked.length) || minSelection == 0;\r\n                } else if ($checked.length >= maxSelection) {\r\n                    $unchecked.prop('disabled', true);\r\n                    valid = true;\r\n                    if ($otherChoiceField.length && !$otherChoiceField.val().trim() && !$this.parents('.totalpoll-question-choices-other').length) {\r\n                        $otherChoice.hide();\r\n                    }\r\n                } else {\r\n                    $unchecked.prop('disabled', false);\r\n                    valid = $checked.length >= minSelection;\r\n                    if ($otherChoiceField.length && !$otherChoiceField.val().trim()) {\r\n                        $otherChoice.show();\r\n                    }\r\n                }\r\n\r\n                $question.attr('totalpoll-valid-selection', valid ? 'true' : 'false');\r\n\r\n                $question.find('.totalpoll-question-choices-item').removeClass('totalpoll-question-choices-item-disabled');\r\n                $question.find('.totalpoll-question-choices-item:has(input:disabled)').addClass('totalpoll-question-choices-item-disabled');\r\n            });\r\n            poll.element.find('.totalpoll-question input[type=\"text\"]').on('focus', function (event) {\r\n                jQuery(this).closest('label').find('input[type=\"checkbox\"], input[type=\"radio\"]').prop('checked', true).change();\r\n            });\r\n            poll.element.find('.totalpoll-question input[type=\"text\"]').on('blur', function (event) {\r\n                jQuery(this).closest('label').find('input[type=\"checkbox\"], input[type=\"radio\"]').prop('checked', Boolean(this.value.trim())).change();\r\n            });\r\n\r\n            poll.element.find('.totalpoll-question input[type=\"checkbox\"], .totalpoll-question input[type=\"radio\"]').change();\r\n        }\r\n\r\n        destroy() {\r\n        }\r\n    }\r\n\r\n    class ModalBehaviour implements Behaviour {\r\n        public modal = new Modal();\r\n\r\n        constructor(private poll: Poll) {\r\n            jQuery(poll.element).on('click', '[totalpoll-modal]', (event) => {\r\n                var selector = jQuery(event.currentTarget).attr('totalpoll-modal');\r\n                if (selector) {\r\n                    this.modal.setContent(jQuery(selector).clone());\r\n                }\r\n\r\n                this.modal.show();\r\n\r\n                event.preventDefault();\r\n            });\r\n        }\r\n\r\n\r\n        destroy() {\r\n            this.modal.remove();\r\n        }\r\n    }\r\n\r\n    class reCaptchaBehaviour implements Behaviour {\r\n        readonly invisible: Boolean;\r\n        readonly widget;\r\n        private $form;\r\n        private $recaptcha;\r\n        private valid: Boolean = false;\r\n\r\n        constructor(private poll: Poll) {\r\n            this.$recaptcha = poll.element.find('.g-recaptcha');\r\n            this.$form = poll.element.find('form');\r\n            this.invisible = this.$recaptcha.data('size') === 'invisible';\r\n\r\n            this.widget = this.invisible ? this.$form.find('[type=\"submit\"][value=\"vote\"]').get(0) : this.$recaptcha.get(0);\r\n\r\n            // Invisible\r\n            if (this.invisible) {\r\n                this.$form.on('submit', (event) => this.validate(event));\r\n                window['grecaptcha'].ready(() => this.render());\r\n            } else if (this.poll.isViaAjax()) {\r\n                this.render();\r\n            }\r\n        }\r\n\r\n        destroy() {\r\n            this.$recaptcha.remove();\r\n        }\r\n\r\n        render() {\r\n            window['grecaptcha'].render(this.widget, {\r\n                    sitekey: this.$recaptcha.data('sitekey'),\r\n                    callback: () => {\r\n                        this.valid = true;\r\n                        if (this.invisible) {\r\n                            this.$form.submit();\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        validate(event) {\r\n            if (!this.valid) {\r\n                event.preventDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    class CountUpBehaviour implements Behaviour {\r\n        constructor(private poll: Poll) {\r\n            poll.element.find('[totalpoll-count-up]').each((index, element) => {\r\n                // Prepare arguments\r\n                let $element = jQuery(element);\r\n                let countTo = Number($element.attr('totalpoll-count-up'));\r\n                let format = $element.attr('totalpoll-count-format') || \"{{counter}}\";\r\n                let pad = Number($element.attr('totalpoll-count-pad')) || 2;\r\n                // Start\r\n                this.start($element, countTo, format, pad);\r\n            });\r\n        }\r\n\r\n        destroy() {\r\n\r\n        }\r\n\r\n        start(el, countTo, format, pad = 2) {\r\n            jQuery({counter: 0, format, pad, el})\r\n                .animate({counter: countTo}, {\r\n                    duration: 900,\r\n                    step: this.step,\r\n                    complete: this.step\r\n                });\r\n        }\r\n\r\n        step() {\r\n            let formatedCounter = this['format'].replace('{{counter}}', CountUpBehaviour.padStart(Math.round(this['counter']), this['pad']));\r\n            this['el'].text(formatedCounter);\r\n        }\r\n\r\n        static padStart(number, targetLength, padString = \"0\") {\r\n            targetLength = targetLength >> 0; //truncate if number, or convert non-number to 0;\r\n            padString = String(typeof padString !== 'undefined' ? padString : ' ');\r\n            if (number.length >= targetLength) {\r\n                return String(number);\r\n            } else {\r\n                targetLength = targetLength - number.length;\r\n                if (targetLength > padString.length) {\r\n                    padString += padString['repeat'](targetLength / padString.length); //append to original to ensure we are longer than needed\r\n                }\r\n                return padString.slice(0, targetLength) + String(number);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Transitions\r\n     */\r\n    abstract class Transition {\r\n        constructor(public element, public duration: number) {\r\n            this.element = jQuery(element);\r\n        }\r\n\r\n        getDuration() {\r\n            return Number(this.duration);\r\n        }\r\n\r\n        getElement() {\r\n            return this.element;\r\n        }\r\n\r\n        abstract in(callback?: Function, duration?: number);\r\n\r\n        abstract out(callback?: Function, duration?: number);\r\n    }\r\n\r\n    class SimpleTransition extends Transition {\r\n        in(callback?: Function, duration: number = this.getDuration()) {\r\n            this.getElement().css({'visibility': 'visible', 'display': 'inherit'});\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        }\r\n\r\n        out(callback?: Function, duration: number = this.getDuration()) {\r\n            this.getElement().css('visibility', 'hidden');\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        }\r\n    }\r\n\r\n    class FadeTransition extends Transition {\r\n        in(callback?: Function, duration: number = this.getDuration()) {\r\n            this.getElement().fadeIn(duration, callback);\r\n        }\r\n\r\n        out(callback?: Function, duration: number = this.getDuration()) {\r\n            this.getElement().fadeTo(duration, 0.2, callback);\r\n        }\r\n    }\r\n\r\n    class SlideTransition extends Transition {\r\n        in(callback?: Function, duration: number = this.getDuration()) {\r\n            this.getElement().slideDown(duration, callback);\r\n        }\r\n\r\n        out(callback?: Function, duration: number = this.getDuration()) {\r\n            this.getElement().slideUp(duration, callback);\r\n        }\r\n    }\r\n\r\n    export class Hooks {\r\n        static addAction(event, callback) {\r\n            jQuery(TotalPoll).on(event, function (event) {\r\n                let payload = [].slice.call(arguments).splice(1);\r\n                callback.apply(event, payload);\r\n            });\r\n        }\r\n\r\n        static doAction(event, payload) {\r\n            jQuery(TotalPoll).triggerHandler(event, payload);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Poll\r\n     */\r\n    export class Poll {\r\n        public behaviours: any = {};\r\n        public config: any = {};\r\n        public id;\r\n        public screen: any = '';\r\n        public transition: Transition;\r\n\r\n        constructor(public element, private viaAjax = false, private viaAsync = false) {\r\n            this.id = element.attr('totalpoll');\r\n            this.config = JSON.parse(element.find('[totalpoll-config]').text());\r\n            this.screen = element.attr('totalpoll-screen');\r\n\r\n            if (TotalPoll.Polls[this.id]) {\r\n                // Destroy the old instance\r\n                TotalPoll.Polls[this.id].destroy();\r\n            }\r\n\r\n            TotalPoll.Polls[this.id] = this;\r\n            element.data('poll', this);\r\n\r\n            // Selection\r\n            this.behaviours['selection'] = new SelectionBehaviour(this);\r\n\r\n            // Modal\r\n            this.behaviours['modal'] = new ModalBehaviour(this);\r\n\r\n            // Scroll up\r\n            if (this.config['behaviours']['scrollUp']) {\r\n                this.behaviours['scrollUp'] = new ScrollUpBehaviour(this);\r\n            }\r\n\r\n            // One-click\r\n            if (this.config['behaviours']['oneClick']) {\r\n                this.behaviours['oneClick'] = new OneClickBehaviour(this);\r\n            }\r\n\r\n            // Questions slider\r\n            if (this.config['behaviours']['slider']) {\r\n                this.behaviours['slider'] = new SliderBehaviour(this);\r\n            }\r\n\r\n            // Count up\r\n            if (this.config['behaviours']['countUp']) {\r\n                this.behaviours['countUp'] = new CountUpBehaviour(this);\r\n            }\r\n\r\n            // Transition\r\n            let transition = this.config['effects']['transition'];\r\n            let container = this.element.find('.totalpoll-container');\r\n\r\n            if (transition == 'fade') {\r\n                this.transition = new FadeTransition(container, this.config['effects']['duration']);\r\n            } else if (transition == 'slide') {\r\n                this.transition = new SlideTransition(container, this.config['effects']['duration']);\r\n            } else {\r\n                this.transition = new SimpleTransition(container, this.config['effects']['duration']);\r\n            }\r\n\r\n            // reCaptcha\r\n            if (window['grecaptcha'] && element.find('.g-recaptcha').length) {\r\n                this.behaviours['recaptcha'] = new reCaptchaBehaviour(this);\r\n            }\r\n\r\n            // Ajax\r\n            if (this.config['behaviours']['async'] || this.config['behaviours']['ajax']) {\r\n                this.behaviours['ajax'] = new AjaxBehaviour(this);\r\n            }\r\n\r\n            // Async\r\n            if (this.config['behaviours']['async']) {\r\n                this.behaviours['ajax'].load(element.attr('totalpoll-ajax-url'));\r\n            }\r\n\r\n            // Embed\r\n            if (window.top !== window.self) {\r\n                this.behaviours['embed'] = new EmbedResizingBehaviour(this);\r\n                this.behaviours['embed'].postHeight();\r\n            }\r\n\r\n            Hooks.doAction('totalpoll/init', this);\r\n        }\r\n\r\n        destroy() {\r\n            jQuery.each(this.behaviours, function (id, behaviour: Behaviour) {\r\n                behaviour.destroy();\r\n            });\r\n            Hooks.doAction('totalpoll/destroy', this);\r\n            // this.element.remove();\r\n        }\r\n\r\n        isViaAjax() {\r\n            return this.viaAjax;\r\n        }\r\n\r\n        isViaAsync() {\r\n            return this.viaAsync;\r\n        }\r\n    }\r\n}\r\n\r\njQuery(function ($) {\r\n    $('[totalpoll]').each(function () {\r\n        new TotalPoll.Poll($(this));\r\n    });\r\n});\r\n"]}